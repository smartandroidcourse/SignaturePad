<ol dir="auto">
  <li>
<p dir="auto">Manifest Permission:</p>
<div class="highlight highlight-source-groovy notranslate position-relative overflow-auto" dir="auto">
<pre><code id="depCodeGradle" class=" kode  language-css">&lt;uses-permission <span class="token string">android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;</span></code><span class="pl-s"><span class="pl-pds"><br /><br /></span></span></pre>
</div>
</li>
<li>
<p dir="auto">Include the library as local library project:</p>
<div class="highlight highlight-source-groovy notranslate position-relative overflow-auto" dir="auto">
<pre><code id="depCodeGradle" class=" kode  language-css">maven <span class="token string">{url 'https://jitpack.io'}</span></code><span class="pl-s"><span class="pl-pds"><br /><br /></span></span></pre>
</div>
</li>
<li>
<p dir="auto">Include the library as local library project:</p>
<div class="highlight highlight-source-groovy notranslate position-relative overflow-auto" dir="auto">
<pre><code class=" kode  language-css">implementation <span class="token string">'</span></code><code id="depCodeGradle" class=" kode  language-css"><span class="token string">com.github.smartandroidcourse:SignaturePad</span></code><code id="depCodeGradle" class=" kode  language-css"><span class="token string">:1.0</span></code><span class="pl-s"><span class="pl-pds">'<br /><br /></span></span></pre>
</div>
</li>
<li>
<p dir="auto">Add view to your layout file:</p>
<div class="highlight highlight-text-xml notranslate position-relative overflow-auto" dir="auto">
<pre><span class="pl-c"><span class="pl-c">&lt;!--</span> ... <span class="pl-c">--&gt;</span></span></pre>
<pre>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br />&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"<br />    xmlns:tools="http://schemas.android.com/tools"<br />    android:layout_width="match_parent"<br />    android:layout_height="match_parent"<br />    android:layout_margin="25dp"<br />    tools:context=".MainActivity"&gt;<br /><br /><br />    &lt;RelativeLayout<br />        android:layout_width="fill_parent"<br />        android:layout_height="fill_parent"<br />        android:layout_above="@+id/buttons_container"<br />        android:id="@+id/signature_pad_container"&gt;<br /><br />        &lt;FrameLayout<br />            android:layout_width="fill_parent"<br />            android:layout_height="1dp"<br />            android:background="@android:color/darker_gray"<br />            android:layout_marginBottom="8dp"<br />            android:layout_above="@+id/signature_pad_description" /&gt;<br /><br />        &lt;TextView<br />            android:id="@+id/signature_pad_description"<br />            android:layout_width="wrap_content"<br />            android:layout_centerHorizontal="true"<br />            android:layout_height="wrap_content"<br />            android:textColor="@android:color/darker_gray"<br />            android:layout_marginBottom="16dp"<br />            android:layout_alignParentBottom="true"<br />            android:text="Signature Pad" /&gt;<br /><br />        &lt;colorsfx.smart.android.courses.signaturepad.views.SignaturePad<br />            android:layout_width="fill_parent"<br />            android:layout_height="fill_parent"<br />            android:id="@+id/signature_pad" /&gt;<br />    &lt;/RelativeLayout&gt;<br /><br />    &lt;LinearLayout<br />        android:id="@+id/buttons_container"<br />        android:layout_width="match_parent"<br />        android:layout_height="wrap_content"<br />        android:weightSum="2"<br />        android:layout_marginTop="15dp"<br />        android:orientation="horizontal"<br />        android:layout_alignParentBottom="true"&gt;<br /><br />        &lt;Button<br />            android:id="@+id/clear_button"<br />            android:layout_width="0dp"<br />            android:layout_weight="1"<br />            android:layout_height="55dp"<br />            android:layout_marginRight="5dp"<br />            android:text="Clear"<br />            android:enabled="false" /&gt;<br /><br />        &lt;Button<br />            android:id="@+id/save_button"<br />            android:layout_width="0dp"<br />            android:layout_weight="1"<br />            android:layout_height="55dp"<br />            android:layout_marginLeft="5dp"<br />            android:text="Save"<br />            android:enabled="false" /&gt;<br /><br />    &lt;/LinearLayout&gt;<br /><br />&lt;/RelativeLayout&gt;</pre>
<pre><span class="pl-c"><span class="pl-c">&lt;!--</span> ... <span class="pl-c">--&gt;</span></span></pre>
<div class="zeroclipboard-container position-absolute right-0 top-0">&nbsp;</div>
</div>
</li>
<li>
<p dir="auto">Add component handler into your activity or fragment (Java):</p>
<div class="highlight highlight-source-java notranslate position-relative overflow-auto" dir="auto">
<pre>public class MainActivity extends AppCompatActivity {<br /><br />    private static final int REQUEST_EXTERNAL_STORAGE = 1;<br />    private static String[] PERMISSIONS_STORAGE = {WRITE_EXTERNAL_STORAGE};<br />    private SignaturePad mSignaturePad;<br />    private Button mClearButton;<br />    private Button mSaveButton;<br /><br />    @Override<br />    protected void onCreate(Bundle savedInstanceState) {<br />        super.onCreate(savedInstanceState);<br />        setContentView(R.layout.activity_main);<br /><br />        verifyStoragePermissions(this);<br /><br />        mSignaturePad = (SignaturePad)findViewById(R.id.signature_pad);<br />        mSignaturePad.setOnSignedListener(new SignaturePad.OnSignedListener() {<br />            @Override<br />            public void onStartSigning() {<br />                Toast.makeText(getApplicationContext(), "OnStartSigning", Toast.LENGTH_SHORT).show();<br />            }<br /><br />            @Override<br />            public void onSigned() {<br />                mSaveButton.setEnabled(true);<br />                mClearButton.setEnabled(true);<br />            }<br /><br />            @Override<br />            public void onClear() {<br />                mSaveButton.setEnabled(false);<br />                mClearButton.setEnabled(false);<br />            }<br />        });<br /><br />        mClearButton = (Button)findViewById(R.id.clear_button);<br />        mSaveButton = (Button)findViewById(R.id.save_button);<br /><br />        mClearButton.setOnClickListener(new View.OnClickListener() {<br />            @Override<br />            public void onClick(View view) {<br />                mSignaturePad.clear();<br />            }<br />        });<br /><br />        mSaveButton.setOnClickListener(new View.OnClickListener() {<br />            @Override<br />            public void onClick(View view) {<br />                Bitmap signatureBitmap = mSignaturePad.getSignatureBitmap();<br />                if (addJpgSignatureToGallery(signatureBitmap)) {<br />                    Toast.makeText(getApplicationContext(), "Signature saved into the Gallery", Toast.LENGTH_SHORT).show();<br />                } else {<br />                    Toast.makeText(getApplicationContext(), "Unable to store the signature", Toast.LENGTH_SHORT).show();<br />                }<br />                if (addSvgSignatureToGallery(mSignaturePad.getSignatureSvg())) {<br />                    Toast.makeText(getApplicationContext(), "SVG Signature saved into the Gallery", Toast.LENGTH_SHORT).show();<br />                } else {<br />                    Toast.makeText(getApplicationContext(), "Unable to store the SVG signature", Toast.LENGTH_SHORT).show();<br />                }<br />            }<br />        });<br /><br />    }<br /><br />    @Override<br />    public void onRequestPermissionsResult(int requestCode,<br />                                           @NonNull String permissions[], @NonNull int[] grantResults) {<br />        super.onRequestPermissionsResult(requestCode, permissions, grantResults);<br />        switch (requestCode) {<br />            case REQUEST_EXTERNAL_STORAGE: {<br />                // If request is cancelled, the result arrays are empty.<br />                if (grantResults.length &lt;= 0<br />                        || grantResults[0] != PackageManager.PERMISSION_GRANTED) {<br />                    Toast.makeText(getApplicationContext(), "Cannot write images to external storage", Toast.LENGTH_SHORT).show();<br />                }<br />            }<br />        }<br />    }<br /><br />    public File getAlbumStorageDir(String albumName) {<br />        // Get the directory for the user's public pictures directory.<br />        File file = new File(Environment.getExternalStoragePublicDirectory(<br />                Environment.DIRECTORY_PICTURES), albumName);<br />        if (!file.mkdirs()) {<br />            Log.e("SignaturePad", "Directory not created");<br />        }<br />        return file;<br />    }<br /><br />    public void saveBitmapToJPG(Bitmap bitmap, File photo) throws IOException {<br />        Bitmap newBitmap = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Bitmap.Config.ARGB_8888);<br />        Canvas canvas = new Canvas(newBitmap);<br />        canvas.drawColor(Color.WHITE);<br />        canvas.drawBitmap(bitmap, 0, 0, null);<br />        OutputStream stream = new FileOutputStream(photo);<br />        newBitmap.compress(Bitmap.CompressFormat.JPEG, 80, stream);<br />        stream.close();<br />    }<br /><br />    public boolean addJpgSignatureToGallery(Bitmap signature) {<br />        boolean result = false;<br />        try {<br />            File photo = new File(getAlbumStorageDir("SignaturePad"), String.format("Signature_%d.jpg", System.currentTimeMillis()));<br />            saveBitmapToJPG(signature, photo);<br />            scanMediaFile(photo);<br />            result = true;<br />        } catch (IOException e) {<br />            e.printStackTrace();<br />        }<br />        return result;<br />    }<br /><br />    private void scanMediaFile(File photo) {<br />        Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);<br />        Uri contentUri = Uri.fromFile(photo);<br />        mediaScanIntent.setData(contentUri);<br />        sendBroadcast(mediaScanIntent);<br />    }<br /><br />    public boolean addSvgSignatureToGallery(String signatureSvg) {<br />        boolean result = false;<br />        try {<br />            File svgFile = new File(getAlbumStorageDir("SignaturePad"), String.format("Signature_%d.svg", System.currentTimeMillis()));<br />            OutputStream stream = new FileOutputStream(svgFile);<br />            OutputStreamWriter writer = new OutputStreamWriter(stream);<br />            writer.write(signatureSvg);<br />            writer.close();<br />            stream.flush();<br />            stream.close();<br />            scanMediaFile(svgFile);<br />            result = true;<br />        } catch (IOException e) {<br />            e.printStackTrace();<br />        }<br />        return result;<br />    }<br /><br />    /**<br />     * Checks if the app has permission to write to device storage<br />     * &lt;p/&gt;<br />     * If the app does not has permission then the user will be prompted to grant permissions<br />     *<br />     * @param activity the activity from which permissions are checked<br />     */<br />    public static void verifyStoragePermissions(Activity activity) {<br />        // Check if we have write permission<br />        int permission = ActivityCompat.checkSelfPermission(activity, WRITE_EXTERNAL_STORAGE);<br /><br />        if (permission != PackageManager.PERMISSION_GRANTED) {<br />            // We don't have permission so prompt the user<br />            ActivityCompat.requestPermissions(<br />                    activity,<br />                    PERMISSIONS_STORAGE,<br />                    REQUEST_EXTERNAL_STORAGE<br />            );<br />        }<br />    }<br />}</pre>
<div class="zeroclipboard-container position-absolute right-0 top-0">&nbsp;</div>
</div>
</li>
<li>
<p dir="auto">Add component handler into your activity or fragment (Kotlin):</p>
<div class="highlight highlight-source-java notranslate position-relative overflow-auto" dir="auto">
<pre>class MainActivity : AppCompatActivity() {<br /><br />    val REQUEST_EXTERNAL_STORAGE = 1<br />    val PERMISSIONS_STORAGE = arrayOf(permission.WRITE_EXTERNAL_STORAGE)<br />    private lateinit var mSignaturePad: SignaturePad<br />    private lateinit var mClearButton: Button<br />    private lateinit var mSaveButton: Button<br /><br />    override fun onCreate(savedInstanceState: Bundle?) {<br />        super.onCreate(savedInstanceState)<br />        setContentView(R.layout.activity_main)<br />        verifyStoragePermissions(this)<br /><br />        mSignaturePad = findViewById&lt;View&gt;(R.id.signature_pad) as SignaturePad<br />        mSignaturePad.setOnSignedListener(object : OnSignedListener {<br />            override fun onStartSigning() {<br />                Toast.makeText(applicationContext, "OnStartSigning", Toast.LENGTH_SHORT).show()<br />            }<br /><br />            override fun onSigned() {<br />                mSaveButton.isEnabled = true<br />                mClearButton.isEnabled = true<br />            }<br /><br />            override fun onClear() {<br />                mSaveButton.isEnabled = false<br />                mClearButton.isEnabled = false<br />            }<br />        })<br /><br />        mClearButton = findViewById&lt;View&gt;(R.id.clear_button) as Button<br />        mSaveButton = findViewById&lt;View&gt;(R.id.save_button) as Button<br /><br />        mClearButton.setOnClickListener { mSignaturePad.clear() }<br /><br />        mSaveButton.setOnClickListener {<br />            val signatureBitmap = mSignaturePad.signatureBitmap<br />            if (addJpgSignatureToGallery(signatureBitmap)) {<br />                Toast.makeText(<br />                    applicationContext,<br />                    "Signature saved into the Gallery",<br />                    Toast.LENGTH_SHORT<br />                ).show()<br />            } else {<br />                Toast.makeText(<br />                    applicationContext,<br />                    "Unable to store the signature",<br />                    Toast.LENGTH_SHORT<br />                ).show()<br />            }<br />            if (addSvgSignatureToGallery(mSignaturePad.signatureSvg)) {<br />                Toast.makeText(<br />                    applicationContext,<br />                    "SVG Signature saved into the Gallery",<br />                    Toast.LENGTH_SHORT<br />                ).show()<br />            } else {<br />                Toast.makeText(<br />                    applicationContext,<br />                    "Unable to store the SVG signature",<br />                    Toast.LENGTH_SHORT<br />                ).show()<br />            }<br />        }<br /><br />    }<br /><br />    override fun onRequestPermissionsResult(<br />        requestCode: Int,<br />        permissions: Array&lt;String?&gt;, grantResults: IntArray<br />    ) {<br />        super.onRequestPermissionsResult(requestCode, permissions, grantResults)<br />        when (requestCode) {<br />            REQUEST_EXTERNAL_STORAGE -&gt; {<br /><br />                // If request is cancelled, the result arrays are empty.<br />                if (grantResults.size &lt;= 0<br />                    || grantResults[0] != PackageManager.PERMISSION_GRANTED<br />                ) {<br />                    Toast.makeText(<br />                        applicationContext,<br />                        "Cannot write images to external storage",<br />                        Toast.LENGTH_SHORT<br />                    ).show()<br />                }<br />            }<br />        }<br />    }<br /><br />    fun getAlbumStorageDir(albumName: String?): File? {<br />        // Get the directory for the user's public pictures directory.<br />        val file = File(<br />            Environment.getExternalStoragePublicDirectory(<br />                Environment.DIRECTORY_PICTURES<br />            ), albumName<br />        )<br />        if (!file.mkdirs()) {<br />            Log.e("SignaturePad", "Directory not created")<br />        }<br />        return file<br />    }<br /><br />    @Throws(IOException::class)<br />    fun saveBitmapToJPG(bitmap: Bitmap, photo: File?) {<br />        val newBitmap = Bitmap.createBitmap(bitmap.width, bitmap.height, Bitmap.Config.ARGB_8888)<br />        val canvas = Canvas(newBitmap)<br />        canvas.drawColor(Color.WHITE)<br />        canvas.drawBitmap(bitmap, 0f, 0f, null)<br />        val stream: OutputStream = FileOutputStream(photo)<br />        newBitmap.compress(Bitmap.CompressFormat.JPEG, 80, stream)<br />        stream.close()<br />    }<br /><br />    fun addJpgSignatureToGallery(signature: Bitmap): Boolean {<br />        var result = false<br />        try {<br />            val photo = File(<br />                getAlbumStorageDir("SignaturePad"),<br />                String.format("Signature_%d.jpg", System.currentTimeMillis())<br />            )<br />            saveBitmapToJPG(signature, photo)<br />            scanMediaFile(photo)<br />            result = true<br />        } catch (e: IOException) {<br />            e.printStackTrace()<br />        }<br />        return result<br />    }<br /><br />    private fun scanMediaFile(photo: File) {<br />        val mediaScanIntent = Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE)<br />        val contentUri = Uri.fromFile(photo)<br />        mediaScanIntent.data = contentUri<br />        sendBroadcast(mediaScanIntent)<br />    }<br /><br />    fun addSvgSignatureToGallery(signatureSvg: String?): Boolean {<br />        var result = false<br />        try {<br />            val svgFile = File(<br />                getAlbumStorageDir("SignaturePad"),<br />                String.format("Signature_%d.svg", System.currentTimeMillis())<br />            )<br />            val stream: OutputStream = FileOutputStream(svgFile)<br />            val writer = OutputStreamWriter(stream)<br />            writer.write(signatureSvg)<br />            writer.close()<br />            stream.flush()<br />            stream.close()<br />            scanMediaFile(svgFile)<br />            result = true<br />        } catch (e: IOException) {<br />            e.printStackTrace()<br />        }<br />        return result<br />    }<br /><br />    /**<br />     * Checks if the app has permission to write to device storage<br />     *<br />     *<br />     * If the app does not has permission then the user will be prompted to grant permissions<br />     *<br />     * @param activity the activity from which permissions are checked<br />     */<br />    fun verifyStoragePermissions(activity: Activity?) {<br />        // Check if we have write permission<br />        val permission =<br />            ActivityCompat.checkSelfPermission(activity!!, permission.WRITE_EXTERNAL_STORAGE)<br />        if (permission != PackageManager.PERMISSION_GRANTED) {<br />            // We don't have permission so prompt the user<br />            ActivityCompat.requestPermissions(<br />                activity,<br />               PERMISSIONS_STORAGE,<br />               REQUEST_EXTERNAL_STORAGE<br />            )<br />        }<br />    }<br />}</pre>
</div>
</li>
</ol>
